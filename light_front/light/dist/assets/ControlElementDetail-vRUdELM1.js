import{r as b,a as X,A as Y,k as Z,B as tt,o as st,c as l,b as n,d as s,t as o,m as d,e as u,w as v,F as j,E,C as I,G as S,f as G,i as _,h as y,j as h,g as et,u as at,l as i,H as it}from"./index-B-w4kYl_.js";import{_ as lt,a as ot}from"./AccountsGroupObjectPermissions-DDdtONPx.js";import"./EditorComponent-DnRpnzAn.js";const dt={key:0},nt={key:0,class:"detail-page"},rt={key:0},ct={class:"detail-card"},mt={class:"detail-card-info"},bt={class:"detail-header"},pt={class:"detail-header-title"},ut={class:"detail-card-text"},vt={class:"detail-card-text-elem"},_t={class:"detail-card-text-elem"},yt={key:0,class:"detail-card-text-elem"},ht={class:"detail-card-text-elem"},kt={class:"detail-menu button-group"},gt={key:0,class:"modal-overlay"},Ct={class:"modal"},jt={class:"modal-header"},Et={class:"modal-header-h2"},ft={class:"minibutton-group modal-menu"},Pt={class:"detail-tabs"},wt={class:"tabs-header"},At=["onClick"],Dt={key:0,class:"tabs-content"},Ot={key:0,class:"desc-tab"},$t={key:0},It={key:1},St={key:1,class:"detail-tab"},xt={class:"detail-tab-elem"},Vt={class:"detail-tab-elem"},Lt={key:0,class:"detail-tab-elem"},Mt={class:"detail-tab-elem"},Bt={class:"detail-tab-elem"},Gt={class:"detail-tab-elem"},Tt={class:"detail-tab-elem"},qt={class:"detail-tab-elem"},Nt={key:2,class:"chips-tab-outer"},zt={key:0},Jt={key:0,class:"chips-tab-inner"},Ft={class:"chips-tab-item-top"},Rt={class:"chips-tab-item-title"},Ut={key:0,class:"chips-tab-item-detail"},Ht={class:"chips-tab-item-detail-elem"},Kt={key:1,class:"chips-tab-item-detail"},Qt={class:"chips-tab-item-detail-elem"},Wt={key:2,class:"chips-tab-item-detail"},Xt={class:"chips-tab-item-detail-elem"},Yt={class:"chips-tab-item-detail-elem"},Zt={key:3,class:"chips-tab-item-menu-outer"},ts={class:"chips-tab-item-menu-inner"},ss=["onClick"],es={key:4},as={key:0,class:"modal-overlay"},is={class:"modal"},ls={class:"modal-header"},os={class:"modal-header-h2"},ds={class:"minibutton-group modal-menu"},ns={key:1},rs={key:1},cs={key:2,class:"tab-menu minibutton-group"},ms={key:3,class:"chips-tab-outer"},bs={key:0},ps={key:0,class:"chips-tab-inner"},us={class:"chips-tab-item-top"},vs={class:"chips-tab-item-title"},_s={key:0,class:"chips-tab-item-detail"},ys={class:"chips-tab-item-detail-elem"},hs={class:"chips-tab-item-detail-elem"},ks={class:"chips-tab-item-detail-elem"},gs={key:1,class:"chips-tab-item-detail"},Cs={class:"chips-tab-item-detail-elem"},js={class:"chips-tab-item-detail-elem"},Es={key:0,class:"chips-tab-item-detail-elem"},fs={class:"chips-tab-item-detail-elem"},Ps={class:"chips-tab-item-detail-elem"},ws={key:2,class:"chips-tab-item-detail"},As={class:"chips-tab-item-detail-elem"},Ds={class:"chips-tab-item-detail-elem"},Os={key:0,class:"chips-tab-item-detail-elem"},$s={class:"chips-tab-item-detail-elem"},Is={class:"chips-tab-item-detail-elem"},Ss={key:3,class:"chips-tab-item-detail"},xs={class:"chips-tab-item-detail-elem"},Vs={class:"chips-tab-item-detail-elem"},Ls={key:4,class:"chips-tab-item-menu-outer"},Ms={class:"chips-tab-item-menu-inner"},Bs=["onClick"],Gs={key:5},Ts={key:0,class:"modal-overlay"},qs={class:"modal"},Ns={class:"modal-header"},zs={class:"modal-header-h2"},Js={class:"minibutton-group modal-menu"},Fs={key:1},Rs={key:1},Us={key:2,class:"tab-menu minibutton-group"},Hs={key:4,class:"chips-tab-outer"},Ks={key:0},Qs={key:0,class:"chips-tab-inner"},Ws={class:"chips-tab-item-top"},Xs={class:"chips-tab-item-title"},Ys={key:0,class:"chips-tab-item-detail"},Zs={class:"chips-tab-item-detail-elem"},te={class:"chips-tab-item-detail-elem"},se={class:"chips-tab-item-detail-elem"},ee={key:1,class:"chips-tab-item-detail"},ae={class:"chips-tab-item-detail-elem"},ie={class:"chips-tab-item-detail-elem"},le={class:"chips-tab-item-detail-elem"},oe={key:2,class:"chips-tab-item-detail"},de={class:"chips-tab-item-detail-elem"},ne={class:"chips-tab-item-detail-elem"},re={class:"chips-tab-item-detail-elem"},ce={key:0,class:"chips-tab-item-detail-elem"},me={class:"chips-tab-item-detail-elem"},be={class:"chips-tab-item-detail-elem"},pe={class:"chips-tab-item-detail-elem"},ue={class:"chips-tab-item-detail-elem"},ve={key:1,class:"chips-tab-item-detail-elem"},_e={key:3,class:"chips-tab-item-detail"},ye={class:"chips-tab-item-detail-elem"},he={class:"chips-tab-item-detail-elem"},ke={class:"chips-tab-item-detail-elem"},ge={key:4,class:"chips-tab-item-detail"},Ce={class:"chips-tab-item-detail-elem"},je={key:5,class:"chips-tab-item-detail"},Ee={key:6,class:"chips-tab-item-menu-outer"},fe={class:"chips-tab-item-menu-inner"},Pe=["onClick"],we={key:7},Ae={key:0,class:"modal-overlay"},De={class:"modal"},Oe={class:"modal-header"},$e={class:"modal-header-h2"},Ie={class:"minibutton-group modal-menu"},Se={key:1},xe={key:1},Ve={key:2,class:"tab-menu minibutton-group"},Le={key:5,class:"table-tab"},Me={key:6,class:"table-tab"},Be={key:1,class:"none-container"},Ge={key:1,class:"loading"},Te={key:1,class:"loading"},Fe={__name:"ControlElementDetail",setup(qe){const k=Z(),p=at(),x=b(!1),a=X({object:null,globalPermissionsList:[],objectPermissionsDict:{},canViewControlElement:!1,canEditControlElement:!1,canDeleteControlElement:!1,canViewAccountObjectPermission:!1,canAddAccountObjectPermission:!1,canDeleteAccountObjectPermission:!1,canViewAccountsGroupObjectPermission:!1,canAddAccountsGroupObjectPermission:!1,canDeleteAccountsGroupObjectPermission:!1}),g=async()=>{const r=k.params.id;let t=localStorage.getItem("access_token");const c=_(t);t&&!c&&(localStorage.removeItem("access_token"),console.log("Токен удален из localStorage и очищен в переменной"),t=null);try{const e=await y.get(`${h}/control_elements/${r}/`,{headers:{...t&&{Authorization:`Bearer ${t}`}}});console.log("Данные задачи:",e.data),a.object=e.data}catch(e){console.error("Ошибка при получении данных задачи:",e)}},f=b(!1),T=()=>{f.value=!0},V=()=>{f.value=!1},q=async()=>{let r=localStorage.getItem("access_token");const t=_(r);if(r&&!t){p.push({name:"Login"});return}const c=k.params.id;try{await y.delete(`${h}/control_elements/${c}/`,{headers:{Authorization:`Bearer ${r}`}}),V(),p.push({name:"ControlElementList"})}catch(e){console.error("Ошибка удаления задачи:",e)}},P=b(!1),w=b(null),N=r=>{w.value=r,P.value=!0},L=()=>{P.value=!1},z=async r=>{let t=localStorage.getItem("access_token");const c=_(t);if(t&&!c){p.push({name:"Login"});return}try{await y.delete(`${h}/control_element_events/${r}/`,{headers:{Authorization:`Bearer ${t}`}}),await g(),L()}catch(e){console.error("Ошибка удаления аккаунта:",e)}},A=b(!1),D=b(null),J=r=>{D.value=r,A.value=!0},M=()=>{A.value=!1},F=async r=>{let t=localStorage.getItem("access_token");const c=_(t);if(t&&!c){p.push({name:"Login"});return}try{await y.delete(`${h}/control_element_conditions/${r}/`,{headers:{Authorization:`Bearer ${t}`}}),await g(),M()}catch(e){console.error("Ошибка удаления аккаунта:",e)}},O=b(!1),$=b(null),R=r=>{$.value=r,O.value=!0},B=()=>{O.value=!1},U=async r=>{let t=localStorage.getItem("access_token");const c=_(t);if(t&&!c){p.push({name:"Login"});return}try{await y.delete(`${h}/control_element_actions/${r}/`,{headers:{Authorization:`Bearer ${t}`}}),await g(),B()}catch(e){console.error("Ошибка удаления аккаунта:",e)}},H=async()=>{console.log("Проверяем версию прав");const r=JSON.parse(localStorage.getItem("userPermissions"));if(!(r!=null&&r.permissions_version))return;console.log("Текущая версия прав:",r.permissions_version);let t=localStorage.getItem("access_token");const c=_(t);if(!(!t||!c))try{(await y.get(`${h}/user_permissions_version/${r.permissions_version}/`,{headers:{Authorization:`Bearer ${t}`}})).data.actual?console.log("Версия прав актуальна"):(console.log("Версия прав устарела — очищаем память"),localStorage.removeItem("userPermissions"))}catch(e){console.error("Ошибка проверки версии прав:",e),localStorage.removeItem("userPermissions")}},K=async()=>{let r=localStorage.getItem("access_token");const t=_(r);r&&!t&&(localStorage.removeItem("access_token"),console.log("Токен удален из localStorage и очищен в переменной"),r=null);try{let c=JSON.parse(localStorage.getItem("userPermissions"))||{};if(console.log("Разрешения пользователя из памяти",c),Object.keys(c).length>0&&(console.log("ID пользователя в разрешениях из памяти:",c.user_id),!t&&c.user_id!==1||t&&t.user_id!==c.user_id?(console.log("Разрешения пользователя из памяти не соотвествуют пользователю и будут обнулены"),localStorage.removeItem("userPermissions"),c={}):console.log("Разрешения пользователя из памяти соотвествуют пользователю")),Object.keys(c).length===0){const C=await y.get(`${h}/user_permissions/`,{headers:{...r&&{Authorization:`Bearer ${r}`}}});console.log("Разрешения пользователя загружены:",C.data),c=C.data,localStorage.setItem("userPermissions",JSON.stringify(c))}a.globalPermissionsList=c.global_permissions||[],a.objectPermissionsDict=c.object_permissions||{};const e=k.params.id;console.log("ID объекта:",e),a.canViewControlElement=a.globalPermissionsList.includes("bpms.view_control_element")||a.objectPermissionsDict["bpms.view_control_element"]&&a.objectPermissionsDict["bpms.view_control_element"].includes(Number(e)),console.log("Права на просмотр задач:",a.canViewControlElement),a.canEditControlElement=a.globalPermissionsList.includes("bpms.change_control_element")||Array.isArray(a.objectPermissionsDict["bpms.change_control_element"])&&a.objectPermissionsDict["bpms.change_control_element"].includes(Number(e)),console.log("Права на редактирование задач:",a.canEditControlElement),a.canDeleteControlElement=a.globalPermissionsList.includes("bpms.delete_control_element")||Array.isArray(a.objectPermissionsDict["bpms.delete_control_element"])&&a.objectPermissionsDict["bpms.delete_control_element"].includes(Number(e)),console.log("Права на удаление задач:",a.canDeleteControlElement),a.canViewAccountObjectPermission=a.globalPermissionsList.includes("core.view_account_object_permission"),console.log("Права на просмотр объектных прав аккаунтов:",a.canViewAccountObjectPermission),a.canAddAccountObjectPermission=a.globalPermissionsList.includes("core.add_account_object_permission"),console.log("Права на добавление объектных прав аккаунтов:",a.canAddAccountObjectPermission),a.canDeleteAccountObjectPermission=a.globalPermissionsList.includes("core.delete_account_object_permission"),console.log("Права на удаление объектных прав аккаунтов:",a.canDeleteAccountObjectPermission),a.canViewAccountsGroupObjectPermission=a.globalPermissionsList.includes("core.view_accounts_group_object_permission"),console.log("Права на просмотр объектных прав групп:",a.canViewAccountsGroupObjectPermission),a.canAddAccountsGroupObjectPermission=a.globalPermissionsList.includes("core.add_accounts_group_object_permission"),console.log("Права на добавление объектных прав групп:",a.canAddAccountsGroupObjectPermission),a.canDeleteAccountsGroupObjectPermission=a.globalPermissionsList.includes("core.delete_accounts_group_object_permission"),console.log("Права на удаление объектных прав групп:",a.canDeleteAccountsGroupObjectPermission)}catch(c){console.error("Ошибка при загрузке разрешений пользователя:",c)}},Q=()=>{p.back()},W=Y(()=>[{name:"details",label:"Детали"},{name:"desc",label:"Описание"},{name:"control_element_events",label:"События"},{name:"control_element_conditions",label:"Условия"},{name:"control_element_actions",label:"Действия"},a.canViewAccountsGroupObjectPermission?{name:"accountsGroupObjectPermissions",label:"Объектные права групп"}:null,a.canViewAccountObjectPermission?{name:"accountObjectPermissions",label:"Объектные права аккаунтов"}:null].filter(Boolean)),m=b(k.query.tab||localStorage.getItem(`activeControlElementTab-${k.params.id}`)||"desc");return tt(m,r=>{localStorage.setItem(`activeControlElementTab-${k.params.id}`,r),p.push({query:{tab:r}}),console.log("Загружен таб:",r)}),st(async()=>{console.log("Компонент смонтирован, начинаем загрузку данных...");try{await g(),await H(),await K(),x.value=!0}catch(r){console.error("Ошибка при загрузке данных:",r)}}),(r,t)=>{const c=et("router-link");return x.value?(i(),l("div",dt,[a.canViewControlElement?(i(),l("div",nt,[a.object.id?(i(),l("div",rt,[s("div",ct,[s("div",mt,[s("div",bt,[s("div",pt,[s("h1",null,o(a.object.name||"Безымянная задача"),1)])]),s("div",ut,[s("div",vt,[t[4]||(t[4]=s("span",{class:"detail-card-text-label"},"Тип работы:",-1)),d(" "+o(a.object.type_of_work_display||"Нет типа работы"),1)]),s("div",_t,[t[5]||(t[5]=s("span",{class:"detail-card-text-label"},"Многократное срабатывание:",-1)),d(" "+o(a.object.repeat?"Да":"Нет"),1)]),a.object.type_of_work=="task_outcome"?(i(),l("div",yt,[t[6]||(t[6]=s("span",{class:"detail-card-text-label"},"Шаблон задачи:",-1)),d(" "+o(a.object.task_template?a.object.task_template.str:"Нет шаблона задачи"),1)])):n("",!0),s("div",ht,[t[7]||(t[7]=s("span",{class:"detail-card-text-label"},"Категории:",-1)),d(" "+o(a.object.categories.length>0?a.object.categories.map(e=>e.name).join(", "):"Нет категорий"),1)])]),s("div",kt,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"ControlElementEdit",params:{id:a.object.id}},class:"button"},{default:v(()=>[...t[8]||(t[8]=[d(" Изменить ",-1)])]),_:1},8,["to"])):n("",!0),a.canDeleteControlElement?(i(),l("button",{key:1,onClick:T,class:"button"}," Удалить ")):n("",!0),s("button",{type:"button",onClick:Q,class:"button"},"Назад")]),f.value?(i(),l("div",gt,[s("div",Ct,[s("div",jt,[s("h2",Et,"Удаление "+o(a.object.name||"Безымянный задача"),1)]),s("div",ft,[s("button",{onClick:t[0]||(t[0]=e=>q()),class:"minibutton"},"Подтвердить"),s("button",{onClick:V,class:"minibutton"},"Отменить")])])])):n("",!0)])]),s("div",Pt,[s("div",wt,[(i(!0),l(j,null,E(W.value,e=>(i(),l("button",{key:e.name,class:it([{active:m.value===e.name},"tab-button"]),onClick:C=>m.value=e.name},o(e.label),11,At))),128))]),m.value?(i(),l("div",Dt,[m.value==="desc"?(i(),l("div",Ot,[a.object.desc?(i(),l("div",$t,o(a.object.desc),1)):(i(),l("div",It,[...t[9]||(t[9]=[s("div",{class:"none-border"},"Описание отсуствует",-1)])]))])):n("",!0),m.value==="details"?(i(),l("div",St,[s("div",xt,[t[10]||(t[10]=s("span",{class:"detail-tab-label"},"Тип работы:",-1)),d(" "+o(a.object.type_of_work_display||"Нет типа работы"),1)]),s("div",Vt,[t[11]||(t[11]=s("span",{class:"detail-tab-label"},"Многократное срабатывание:",-1)),d(" "+o(a.object.repeat?"Да":"Нет"),1)]),a.object.type_of_work=="task_outcome"?(i(),l("div",Lt,[t[12]||(t[12]=s("span",{class:"detail-tab-label"},"Шаблон задачи:",-1)),d(" "+o(a.object.task_template?a.object.task_template.str:"Нет шаблона задачи"),1)])):n("",!0),s("div",Mt,[t[13]||(t[13]=s("span",{class:"detail-tab-label"},"Категории:",-1)),d(" "+o(a.object.categories.length>0?a.object.categories.map(e=>e.name).join(", "):"Нет категорий"),1)]),s("div",Bt,[t[14]||(t[14]=s("span",{class:"detail-tab-label"},"Создан:",-1)),d(" "+o(a.object.created?I(S)(a.object.created):"Нет данных о создании"),1)]),s("div",Gt,[t[15]||(t[15]=s("span",{class:"detail-tab-label"},"Создатель:",-1)),d(" "+o(a.object.creator?a.object.creator:"Нет создателя"),1)]),s("div",Tt,[t[16]||(t[16]=s("span",{class:"detail-tab-label"},"Изменён:",-1)),d(" "+o(a.object.changed?I(S)(a.object.changed):"Нет данных об изменениях"),1)]),s("div",qt,[t[17]||(t[17]=s("span",{class:"detail-tab-label"},"Редактор:",-1)),d(" "+o(a.object.editor?a.object.editor:"Нет редактора"),1)])])):n("",!0),m.value==="control_element_events"?(i(),l("div",Nt,[a.canViewControlElement?(i(),l("div",zt,[a.object.control_element_events&&a.object.control_element_events.length>0?(i(),l("div",Jt,[(i(!0),l(j,null,E(a.object.control_element_events,e=>(i(),l("div",{key:e.id,class:"chips-tab-item"},[s("div",Ft,[s("div",Rt,[s("h2",null,o(e.event_type_display?e.event_type_display:"Нет данных"),1)])]),e.event_type=="task_created"||e.event_type=="child_task_status_changed"||e.event_type=="task_status_changed"||e.event_type=="task_outcome_changed"||e.event_type=="periodic_event"?(i(),l("div",Ut,[s("div",Ht,[t[18]||(t[18]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)])])):n("",!0),e.event_type=="trigger_fired"?(i(),l("div",Kt,[s("div",Qt,[t[19]||(t[19]=s("span",{class:"chips-tab-item-detail-label"},"Сработавший триггер:",-1)),d(" "+o(e.fired_trigger?e.fired_trigger.str:"Нет данных"),1)])])):n("",!0),e.event_type=="periodic_event"?(i(),l("div",Wt,[s("div",Xt,[t[20]||(t[20]=s("span",{class:"chips-tab-item-detail-label"},"Период:",-1)),d(" "+o(e.period_display||"Нет периода"),1)]),s("div",Yt,[t[21]||(t[21]=s("span",{class:"chips-tab-item-detail-label"},"Начало:",-1)),d(" "+o(e.start_time?I(S)(e.start_time):"Нет данных о начале"),1)])])):n("",!0),a.canEditControlElement||a.canDeleteControlElement?(i(),l("div",Zt,[s("div",ts,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"ControlElementEventEdit",params:{id:e.id},query:{control_elementId:a.object.id}},class:"table-tab-button"},{default:v(()=>[...t[22]||(t[22]=[d(" Изменить ",-1)])]),_:1},8,["to"])):n("",!0),a.canDeleteControlElement?(i(),l("button",{key:1,onClick:C=>N(e),class:"table-tab-button"}," Удалить ",8,ss)):n("",!0)])])):(i(),l("div",es," - "))]))),128)),P.value?(i(),l("div",as,[s("div",is,[s("div",ls,[s("h2",os,"Удаление "+o(w.value.str||"Безымянный исполнитель очереди"),1)]),s("div",ds,[s("button",{onClick:t[1]||(t[1]=e=>z(w.value.id)),class:"minibutton"},"Подтвердить"),s("button",{onClick:L,class:"minibutton"},"Отменить")])])])):n("",!0)])):(i(),l("div",ns,[...t[23]||(t[23]=[s("div",{class:"none-border"},"Нет событий",-1)])]))])):(i(),l("div",rs,[...t[24]||(t[24]=[s("div",{class:"none-border"},"У вас нет разрешения на просмотр",-1)])])),a.canEditControlElement?(i(),l("div",cs,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"CreateControlElementEvent",query:{control_elementId:a.object.id}},class:"minibutton"},{default:v(()=>[...t[25]||(t[25]=[d(" Создать ",-1)])]),_:1},8,["to"])):n("",!0)])):n("",!0)])):n("",!0),m.value==="control_element_conditions"?(i(),l("div",ms,[a.canViewControlElement?(i(),l("div",bs,[a.object.control_element_conditions&&a.object.control_element_conditions.length>0?(i(),l("div",ps,[(i(!0),l(j,null,E(a.object.control_element_conditions,e=>(i(),l("div",{key:e.id,class:"chips-tab-item"},[s("div",us,[s("div",vs,[s("h2",null,o(e.item?e.item:"Нет данных")+" - "+o(e.condition_type_display?e.condition_type_display:"Нет данных"),1)])]),e.condition_type=="task_exists"?(i(),l("div",_s,[s("div",ys,[t[26]||(t[26]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",hs,[t[27]||(t[27]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),s("div",ks,[t[28]||(t[28]=s("span",{class:"chips-tab-item-detail-label"},"Оператор сравнения:",-1)),d(" "+o(e.boolean_operator?"Да":"Нет"),1)])])):n("",!0),e.condition_type=="child_tasks_status"||e.condition_type=="task_status"?(i(),l("div",gs,[s("div",Cs,[t[29]||(t[29]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",js,[t[30]||(t[30]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),e.item!=1?(i(),l("div",Es,[t[31]||(t[31]=s("span",{class:"chips-tab-item-detail-label"},"Логический оператор:",-1)),d(" "+o(e.logic_operator_display?e.logic_operator_display:"Нет данных"),1)])):n("",!0),s("div",fs,[t[32]||(t[32]=s("span",{class:"chips-tab-item-detail-label"},"Оператор сравнения:",-1)),d(" "+o(e.comparison_operator_display?e.comparison_operator_display:"Нет данных"),1)]),s("div",Ps,[t[33]||(t[33]=s("span",{class:"chips-tab-item-detail-label"},"Статус задачи:",-1)),d(" "+o(e.task_status_display?e.task_status_display:"Нет данных"),1)])])):n("",!0),e.condition_type=="task_outcome"?(i(),l("div",ws,[s("div",As,[t[34]||(t[34]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",Ds,[t[35]||(t[35]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),e.item!=1?(i(),l("div",Os,[t[36]||(t[36]=s("span",{class:"chips-tab-item-detail-label"},"Логический оператор:",-1)),d(" "+o(e.logic_operator_display?e.logic_operator_display:"Нет данных"),1)])):n("",!0),s("div",$s,[t[37]||(t[37]=s("span",{class:"chips-tab-item-detail-label"},"Оператор сравнения:",-1)),d(" "+o(e.comparison_operator_display?e.comparison_operator_display:"Нет данных"),1)]),s("div",Is,[t[38]||(t[38]=s("span",{class:"chips-tab-item-detail-label"},"Итог задачи:",-1)),d(" "+o(e.task_outcome?e.task_outcome.str:"Нет данных"),1)])])):n("",!0),e.condition_type=="days_worked"?(i(),l("div",Ss,[s("div",xs,[t[39]||(t[39]=s("span",{class:"chips-tab-item-detail-label"},"Оператор сравнения:",-1)),d(" "+o(e.order_operator_display?e.order_operator_display:"Нет данных"),1)]),s("div",Vs,[t[40]||(t[40]=s("span",{class:"chips-tab-item-detail-label"},"Дни стажа:",-1)),d(" "+o(e.days_worked?e.days_worked:"Нет данных"),1)])])):n("",!0),a.canEditControlElement||a.canDeleteControlElement?(i(),l("div",Ls,[s("div",Ms,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"ControlElementConditionEdit",params:{id:e.id},query:{control_elementId:a.object.id}},class:"table-tab-button"},{default:v(()=>[...t[41]||(t[41]=[d(" Изменить ",-1)])]),_:1},8,["to"])):n("",!0),a.canDeleteControlElement?(i(),l("button",{key:1,onClick:C=>J(e),class:"table-tab-button"}," Удалить ",8,Bs)):n("",!0)])])):(i(),l("div",Gs," - "))]))),128)),A.value?(i(),l("div",Ts,[s("div",qs,[s("div",Ns,[s("h2",zs,"Удаление "+o(D.value.str||"Безымянный исполнитель очереди"),1)]),s("div",Js,[s("button",{onClick:t[2]||(t[2]=e=>F(D.value.id)),class:"minibutton"},"Подтвердить"),s("button",{onClick:M,class:"minibutton"},"Отменить")])])])):n("",!0)])):(i(),l("div",Fs,[...t[42]||(t[42]=[s("div",{class:"none-border"},"Нет условий",-1)])]))])):(i(),l("div",Rs,[...t[43]||(t[43]=[s("div",{class:"none-border"},"У вас нет разрешения на просмотр",-1)])])),a.canEditControlElement?(i(),l("div",Us,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"CreateControlElementCondition",query:{control_elementId:a.object.id}},class:"minibutton"},{default:v(()=>[...t[44]||(t[44]=[d(" Создать ",-1)])]),_:1},8,["to"])):n("",!0)])):n("",!0)])):n("",!0),m.value==="control_element_actions"?(i(),l("div",Hs,[a.canViewControlElement?(i(),l("div",Ks,[a.object.control_element_actions&&a.object.control_element_actions.length>0?(i(),l("div",Qs,[(i(!0),l(j,null,E(a.object.control_element_actions,e=>(i(),l("div",{key:e.id,class:"chips-tab-item"},[s("div",Ws,[s("div",Xs,[s("h2",null,o(e.item?e.item:"Нет данных")+" - "+o(e.action_type_display?e.action_type_display:"Нет данных"),1)])]),e.action_type=="change_task_status"?(i(),l("div",Ys,[s("div",Zs,[t[45]||(t[45]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",te,[t[46]||(t[46]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),s("div",se,[t[47]||(t[47]=s("span",{class:"chips-tab-item-detail-label"},"Статус задачи:",-1)),d(" "+o(e.task_status_display?e.task_status_display:"Нет данных"),1)])])):n("",!0),e.action_type=="change_task_outcome"?(i(),l("div",ee,[s("div",ae,[t[48]||(t[48]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",ie,[t[49]||(t[49]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),s("div",le,[t[50]||(t[50]=s("span",{class:"chips-tab-item-detail-label"},"Итог задачи:",-1)),d(" "+o(e.task_outcome?e.task_outcome.str:"Нет данных"),1)])])):n("",!0),e.action_type=="assign_task"?(i(),l("div",oe,[s("div",de,[t[51]||(t[51]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",ne,[t[52]||(t[52]=s("span",{class:"chips-tab-item-detail-label"},"Целевое взаимодействие:",-1)),d(" "+o(e.target_interaction_display?e.target_interaction_display:"Нет данных"),1)]),s("div",re,[t[53]||(t[53]=s("span",{class:"chips-tab-item-detail-label"},"Тип исполнителя:",-1)),d(" "+o(e.executor_type_display?e.executor_type_display:"Нет данных"),1)]),e.executor_type=="selected_executor"?(i(),l("div",ce,[t[54]||(t[54]=s("span",{class:"chips-tab-item-detail-label"},"Исполнитель:",-1)),d(" "+o(e.executor?e.executor.str:"Нет данных"),1)])):n("",!0),s("div",me,[t[55]||(t[55]=s("span",{class:"chips-tab-item-detail-label"},"Контроль руководителей:",-1)),d(" "+o(a.object.manager_control?"Да":"Нет"),1)]),s("div",be,[t[56]||(t[56]=s("span",{class:"chips-tab-item-detail-label"},"Группа контролеров:",-1)),d(" "+o(e.controller_group?e.controller_group.str:"Нет группы контролеров"),1)]),s("div",pe,[t[57]||(t[57]=s("span",{class:"chips-tab-item-detail-label"},"Группа наблюдателей:",-1)),d(" "+o(e.observer_group?e.observer_group.str:"Нет группы наблюдателей"),1)]),s("div",ue,[t[58]||(t[58]=s("span",{class:"chips-tab-item-detail-label"},"Тип задержки:",-1)),d(" "+o(e.delay_type_display?e.delay_type_display:"Нет данных"),1)]),e.delay_type!="no_delay"?(i(),l("div",ve,[t[59]||(t[59]=s("span",{class:"chips-tab-item-detail-label"},"Задержка:",-1)),d(" "+o(e.delay_value?e.delay_value:"Нет данных"),1)])):n("",!0)])):n("",!0),e.action_type=="add_task_to_queue"?(i(),l("div",_e,[s("div",ye,[t[60]||(t[60]=s("span",{class:"chips-tab-item-detail-label"},"Шаблон задачи:",-1)),d(" "+o(e.task_template?e.task_template.str:"Нет данных"),1)]),s("div",he,[t[61]||(t[61]=s("span",{class:"chips-tab-item-detail-label"},"Целевая задача:",-1)),d(" "+o(e.target_task_display?e.target_task_display:"Нет данных"),1)]),s("div",ke,[t[62]||(t[62]=s("span",{class:"chips-tab-item-detail-label"},"Очередь:",-1)),d(" "+o(e.queue?e.queue.str:"Нет данных"),1)])])):n("",!0),e.action_type=="add_to_group"||e.action_type=="remove_from_group"?(i(),l("div",ge,[s("div",Ce,[t[63]||(t[63]=s("span",{class:"chips-tab-item-detail-label"},"Целевая группа:",-1)),d(" "+o(e.target_group?e.target_group.str:"Нет целевой группы"),1)])])):n("",!0),e.action_type=="new_interaction"?(i(),l("div",je)):n("",!0),a.canEditControlElement||a.canDeleteControlElement?(i(),l("div",Ee,[s("div",fe,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"ControlElementActionEdit",params:{id:e.id},query:{control_elementId:a.object.id}},class:"table-tab-button"},{default:v(()=>[...t[64]||(t[64]=[d(" Изменить ",-1)])]),_:1},8,["to"])):n("",!0),a.canDeleteControlElement?(i(),l("button",{key:1,onClick:C=>R(e),class:"table-tab-button"}," Удалить ",8,Pe)):n("",!0)])])):(i(),l("div",we," - "))]))),128)),O.value?(i(),l("div",Ae,[s("div",De,[s("div",Oe,[s("h2",$e,"Удаление "+o($.value.str||"Безымянный исполнитель очереди"),1)]),s("div",Ie,[s("button",{onClick:t[3]||(t[3]=e=>U($.value.id)),class:"minibutton"},"Подтвердить"),s("button",{onClick:B,class:"minibutton"},"Отменить")])])])):n("",!0)])):(i(),l("div",Se,[...t[65]||(t[65]=[s("div",{class:"none-border"},"Нет действий",-1)])]))])):(i(),l("div",xe,[...t[66]||(t[66]=[s("div",{class:"none-border"},"У вас нет разрешения на просмотр",-1)])])),a.canEditControlElement?(i(),l("div",Ve,[a.canEditControlElement?(i(),u(c,{key:0,to:{name:"CreateControlElementAction",query:{control_elementId:a.object.id}},class:"minibutton"},{default:v(()=>[...t[67]||(t[67]=[d(" Создать ",-1)])]),_:1},8,["to"])):n("",!0)])):n("",!0)])):n("",!0),m.value==="accountsGroupObjectPermissions"?(i(),l("div",Le,[G(lt,{state:a,fetchObject:g,contentTypeModel:"controlelement"},null,8,["state"])])):n("",!0),m.value==="accountObjectPermissions"?(i(),l("div",Me,[G(ot,{state:a,fetchObject:g,contentTypeModel:"controlelement"},null,8,["state"])])):n("",!0)])):n("",!0)])])):a.object.id?n("",!0):(i(),l("div",Be,[...t[68]||(t[68]=[s("div",{class:"none-card"},[s("div",null,"Объект не найден.")],-1)])]))])):(i(),l("div",Ge,[...t[69]||(t[69]=[s("div",null,"У вас нет разрешения на просмотр",-1)])]))])):(i(),l("div",Te,[...t[70]||(t[70]=[s("div",null,"Загрузка данных...",-1)])]))}}};export{Fe as default};
