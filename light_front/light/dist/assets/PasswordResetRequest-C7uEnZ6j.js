import{a as m,r as g,o as _,c as a,d as s,n as k,p as d,b as c,v as p,t as f,u as R,k as q,l as n,z as h,h as w,j}from"./index-BX9avzZ8.js";import"./custom-multiselect-CUD6Um3B.js";const x={key:0},U={class:"form-page"},V={class:"form-field"},B={key:0,class:"error"},D={class:"form-field"},M={key:0,class:"error"},N={key:1,class:"loading"},z={__name:"PasswordResetRequest",setup(O){q();const i=R(),r=m({username:"",email:""}),u=g(!1),v=()=>{i.back()},t=m({}),b=()=>(t.username=r.username?"":"Имя пользователя обязательно!",t.email=r.email?"":"Электронная почта обязательна!",Object.values(t).every(o=>!o)),y=async()=>{if(!b()){console.error("Форма содержит ошибки:",t);return}try{console.log("Отправляем данные для создания запроса:",r);const o={username:r.username,email:r.email,frontend_url:h};console.log("JSON данные перед отправкой:",o);const e=await w.post(`${j}/password_reset_request/`,o,{headers:{Authorization:""}});console.log("Запрос создан:",e.data),i.push({name:"PostPasswordResetRequest",query:{username:r.username,email:r.email}})}catch(o){o.response&&o.response.data?(Object.assign(t,o.response.data),console.error("Ошибка при создании запроса:",o.response.data)):console.error("Ошибка при создании запроса:",o.message)}};return _(async()=>{console.log("Компонент смонтирован, начинаем загрузку данных...");try{u.value=!0}catch(o){console.error("Ошибка при загрузке данных:",o)}}),(o,e)=>u.value?(n(),a("div",x,[s("div",U,[e[5]||(e[5]=s("div",{class:"form-header"},[s("h1",null,"Смена пароля")],-1)),s("form",{onSubmit:k(y,["prevent"]),class:"form",id:"form"},[s("div",V,[e[2]||(e[2]=s("label",{for:"username",class:"form-label"},"Имя пользователя:",-1)),d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),id:"username",type:"text",class:"form-input",placeholder:"Введите имя пользоваетля",required:""},null,512),[[p,r.username]]),t.username?(n(),a("span",B,f(t.username),1)):c("",!0)]),s("div",D,[e[3]||(e[3]=s("label",{for:"email",class:"form-label"},"Электронная почта:",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>r.email=l),id:"email",type:"email",class:"form-input",placeholder:"Введите электронную почту",required:""},null,512),[[p,r.email]]),t.email?(n(),a("span",M,f(t.email),1)):c("",!0)])],32),s("div",{class:"form-menu button-group"},[e[4]||(e[4]=s("button",{type:"submit",class:"button",form:"form"},"Отправить письмо",-1)),s("button",{type:"button",onClick:v,class:"button"},"Отмена")])])])):(n(),a("div",N,[...e[6]||(e[6]=[s("div",null,"Загрузка данных...",-1)])]))}};export{z as default};
